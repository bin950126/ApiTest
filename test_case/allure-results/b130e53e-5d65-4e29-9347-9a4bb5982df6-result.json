{"name": "找到可用的支付提供商", "status": "passed", "parameters": [{"name": "data_set", "value": "({'request_info': {'url': '/customer/me/payment/availableProviders', 'method': 'GET', 'headers': {'Content-Type': 'application/json', 'rental-client-id': 'com.rental.user.app.rybit.stg', 'rental-captcha-token': 'RENTAL_CAPTCHA_TOKEN', 'Authorization': 'Bearer ${get_extract_value(customer_token)}'}}, 'case_info': {'case_title': '找到可用的支付提供商', 'json': None, 'validate': [{'equal': ['$.code', 1000]}], 'extract': {'providerId': '$.data.[0].id', 'provider_Publikey': '$.data.[0].option.stripeKeyPublic'}}}, {'request_info': {'url': '/customer/me/payment/$setup', 'method': 'POST', 'headers': {'Content-Type': 'application/json', 'rental-client-id': 'com.rental.user.app.rybit.stg', 'rental-captcha-token': 'RENTAL_CAPTCHA_TOKEN', 'Authorization': 'Bearer ${get_extract_value(customer_token)}'}}, 'case_info': {'case_title': '请求我的付款方式设置', 'json': {'providerId': '${get_extract_value(providerId)}', 'methodType': 'credit-card'}, 'validate': [{'equal': ['$.code', 1000]}], 'extract': {'customerSetupId': '$.data.id', 'stripeSetupId': '$.data.option.stripeSetupId', 'stripeSetupSecret': '$.data.option.stripeSetupSecret'}}}, {'request_info': {'url': 'https://api.stripe.com/v1/setup_intents/${get_extract_value(stripeSetupId)}/confirm', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded', 'Authorization': 'Bearer ${get_extract_value(provider_Publikey)}'}}, 'case_info': {'case_title': '建立stripe支付方式', 'data': {'client_secret': '${get_extract_value(stripeSetupSecret)}', 'payment_method_data[billing_details][address][city]': 'J', 'payment_method_data[billing_details][address][country]': 'CN', 'payment_method_data[billing_details][address][line1]': 'J', 'payment_method_data[billing_details][address][line2]': 'J', 'payment_method_data[billing_details][address][postal_code]': 'J', 'payment_method_data[billing_details][address][state]': 'J', 'payment_method_data[billing_details][email]': '', 'payment_method_data[billing_details][name]': 'J', 'payment_method_data[billing_details][phone]': '+12025020602', 'payment_method_data[card][cvc]': '666', 'payment_method_data[card][exp_month]': '4', 'payment_method_data[card][exp_year]': '26', 'payment_method_data[card][number]': '4242424242424242', 'payment_method_data[payment_user_agent]': 'stripe-ios/23.15.0; variant.legacy; STPPaymentCardTextField; PaymentSheet.AddressController', 'payment_method_data[type]': 'card', 'use_stripe_sdk': True}, 'validate': [{'equal': ['$.status', 'succeeded']}]}}, {'request_info': {'url': '/customer/me/payment/methods', 'method': 'POST', 'headers': {'Content-Type': 'application/json', 'rental-client-id': 'com.rental.user.app.rybit.stg', 'rental-captcha-token': 'RENTAL_CAPTCHA_TOKEN', 'Authorization': 'Bearer ${get_extract_value(customer_token)}'}}, 'case_info': {'case_title': '绑定信用卡', 'json': {'providerId': '${get_extract_value(providerId)}', 'customerSetupId': '${get_extract_value(customerSetupId)}', 'methodType': 'credit-card'}, 'validate': [{'equal': ['$.code', 1000]}], 'extract': {'paymentMethodId': '$.data.id'}}})"}], "start": 1741179545775, "stop": 1741179545943, "uuid": "66d72d94-24c0-4ebf-80f1-c61c56c35157", "testCaseId": "c72a8f4be62d901687d84139d19148af", "fullName": "test_case.test_customer.TestCustomer#test_bind_PaymentMethod"}